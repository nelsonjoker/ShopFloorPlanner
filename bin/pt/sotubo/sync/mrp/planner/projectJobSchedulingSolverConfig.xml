<?xml version="1.0" encoding="UTF-8"?>
<solver>
	<!--<environmentMode>FAST_ASSERT</environmentMode> -->
	<solutionClass>pt.sotubo.sync.mrp.planner.domain.Schedule</solutionClass>
	<entityClass>pt.sotubo.sync.mrp.planner.domain.Allocation</entityClass>

	<scoreDirectorFactory>
		<scoreDefinitionType>BENDABLE</scoreDefinitionType>
		<bendableHardLevelsSize>2</bendableHardLevelsSize>
		<bendableSoftLevelsSize>3</bendableSoftLevelsSize>
		<incrementalScoreCalculatorClass>pt.sotubo.sync.mrp.planner.solver.score.ProjectJobSchedulingIncrementalScoreCalculator</incrementalScoreCalculatorClass>
		<!--<scoreDrl>org/optaplanner/examples/projectjobscheduling/solver/projectJobSchedulingScoreRules.drl</scoreDrl> -->
	</scoreDirectorFactory>
	<termination>
		<secondsSpentLimit>3600</secondsSpentLimit>
	</termination>

	<constructionHeuristic>
		<constructionHeuristicType>FIRST_FIT</constructionHeuristicType>
	</constructionHeuristic>
	<localSearch>

		<unionMoveSelector>

			<changeMoveSelector> 
				<valueSelector> 
					<variableName>executionMode</variableName> 
				</valueSelector>
				<selectedCountLimit>50</selectedCountLimit> 
			</changeMoveSelector> 

			<changeMoveSelector>
				<valueSelector>
					<variableName>startDate</variableName>
				</valueSelector>
				<selectedCountLimit>100</selectedCountLimit>
			</changeMoveSelector>


		</unionMoveSelector>
		<acceptor>
			<entityTabuRatio>0.2</entityTabuRatio>
			<lateAcceptanceSize>500</lateAcceptanceSize>
		</acceptor>
		<forager>
			<acceptedCountLimit>4</acceptedCountLimit>
		</forager>
	</localSearch>
	
	<localSearch>

		<unionMoveSelector>

			<swapMoveSelector>
				<entitySelector>
					<entityClass>pt.sotubo.sync.mrp.planner.domain.Allocation</entityClass>
				</entitySelector>
				<variableNameInclude>startDate</variableNameInclude>
			</swapMoveSelector>

		</unionMoveSelector>
		<acceptor>
 			<simulatedAnnealingStartingTemperature>1000/1000/86000/86000/86000</simulatedAnnealingStartingTemperature>
			<entityTabuRatio>0.05</entityTabuRatio>
			<lateAcceptanceSize>50</lateAcceptanceSize>
		</acceptor>
		<forager>
			<acceptedCountLimit>1</acceptedCountLimit>
			<finalistPodiumType>STRATEGIC_OSCILLATION</finalistPodiumType>
		</forager>
	</localSearch>

</solver>
